<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>TeacherPro v4.8 - Final Master</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <style>
        :root { --p: #5c7a63; --bg: #fdfcf8; --c: #fff; --b: rgba(0,0,0,0.1); }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: system-ui, sans-serif; background: var(--bg); margin: 0; display: flex; height: 100vh; overflow: hidden; }
        
        /* NAVIGATION LOGIK */
        .view { display: none; width: 100%; height: 100%; overflow-y: auto; padding: 20px; }
        .active-view { display: block !important; }

        .sidebar { width: 250px; background: #f4f1ea; border-right: 1px solid var(--b); display: flex; flex-direction: column; padding: 20px; flex-shrink: 0; }
        .nav-btn { padding: 15px; margin-bottom: 5px; border-radius: 12px; cursor: pointer; font-weight: bold; background: transparent; border: none; text-align: left; width: 100%; display: flex; gap: 10px; font-family: inherit; }
        .nav-btn.active { background: var(--p); color: white; }

        @media (max-width: 800px) {
            body { flex-direction: column; }
            .sidebar { width: 100%; height: 75px; flex-direction: row; order: 2; padding: 5px; border-top: 1px solid var(--border); justify-content: space-around; align-items: center; }
            .nav-btn { flex-direction: column; font-size: 0.65rem; align-items: center; padding: 8px; margin: 0; }
            .main { order: 1; height: calc(100vh - 75px); }
        }

        .main { flex: 1; display: flex; flex-direction: column; overflow: hidden; }
        .card { background: var(--c); border-radius: 15px; padding: 20px; border: 1px solid var(--border); margin-bottom: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); }
        
        /* STUNDENPLAN */
        table { width: 100%; border-collapse: collapse; background: white; border-radius: 10px; overflow: hidden; }
        th, td { border: 1px solid var(--b); padding: 10px; text-align: center; }
        th { background: var(--p); color: white; font-size: 0.8rem; }
        input { width: 100%; border: none; background: transparent; text-align: center; font-family: inherit; }

        #auth { position: fixed; inset: 0; background: var(--bg); z-index: 10000; display: flex; align-items: center; justify-content: center; }
    </style>
</head>
<body>

<div id="auth">
    <div style="background:white; padding:40px; border-radius:25px; text-align:center; width:320px; border:1px solid var(--b); box-shadow: 0 20px 40px rgba(0,0,0,0.1);">
        <h2 style="color:var(--p); margin-top:0;">TeacherPro v4.8</h2>
        <p style="color:#7f8c8d; font-size:0.9rem;">Bitte anmelden</p>
        <input type="password" id="pw" placeholder="Passwort (Standard: 1234)" style="padding:12px; width:100%; margin-bottom:15px; border-radius:10px; border:1px solid var(--b)">
        <button onclick="login()" style="width:100%; padding:12px; background:var(--p); color:white; border:none; border-radius:10px; font-weight:bold; cursor:pointer;">√ñffnen üåø</button>
    </div>
</div>

<nav class="sidebar">
    <div style="font-weight:900; color:var(--p); margin-bottom:25px; font-size:1.2rem;" class="hidden-mobile">TeacherPro</div>
    <button class="nav-btn active" onclick="show('dash', this)"><span>üè† Dashboard</span></button>
    <button class="nav-btn" onclick="show('plan', this)"><span>üìÖ Stundenplan</span></button>
    <button class="nav-btn" onclick="show('cls', this)"><span>üë• Klassen</span></button>
    <button class="nav-btn" onclick="show('tmr', this)"><span>‚è±Ô∏è Timer</span></button>
</nav>

<main class="main">
    <div id="dash" class="view active-view">
        <div class="card" style="background:var(--p); color:white; border:none;"><h2>Willkommen!</h2><p>Dein digitaler Planer ist einsatzbereit.</p></div>
        <div class="card"><h3>‚úçÔ∏è Notizen</h3><textarea id="notes" style="width:100%; height:200px; border:1px solid var(--b); border-radius:10px; padding:10px;" oninput="save()"></textarea></div>
    </div>

    <div id="plan" class="view">
        <div class="card">
            <h3>Wochenplan</h3>
            <div style="overflow-x:auto;">
                <table>
                    <tr><th>Std</th><th>Mo</th><th>Di</th><th>Mi</th><th>Do</th><th>Fr</th></tr>
                    <tbody id="plan-body"></tbody>
                </table>
            </div>
        </div>
    </div>

    <div id="cls" class="view">
        <div class="card">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
                <h3 style="margin:0">Meine Klassen</h3>
                <button onclick="addCls()" style="background:var(--p); color:white; border:none; padding:8px 15px; border-radius:8px;">+ Neu</button>
            </div>
            <div id="cls-list"></div>
        </div>
    </div>

    <div id="tmr" class="view">
        <div class="card" style="text-align:center">
            <h3>Fokus-Timer</h3>
            <h1 id="tdisp" style="font-size:5rem; margin:20px 0;">25:00</h1>
            <button onclick="startT()" style="padding:15px 30px; font-size:1.2rem;">Start</button>
        </div>
    </div>
</main>

<script>
    let db = { name: 'Lehrkraft', pw: '1234', notes: '', classes: [], schedule: {} };

    window.onload = () => {
        const s = localStorage.getItem('tp_v48_ironclad');
        if(s) db = JSON.parse(s);
        
        const b = document.getElementById('plan-body');
        for(let i=1; i<=8; i++) { // Erweitert auf 8 Stunden
            let r = `<tr><td>${i}</td>`;
            for(let j=1; j<=5; j++) r += `<td><input id="p-${i}-${j}" oninput="saveP()" value="${db.schedule[i+'-'+j] || ''}" placeholder="..."></td>`;
            b.innerHTML += r + `</tr>`;
        }
    };

    function login() {
        const p = document.getElementById('pw').value;
        if(p === db.pw) {
            document.getElementById('auth').style.display = 'none';
            document.getElementById('notes').value = db.notes || '';
            renderC();
        } else alert("Falsches Passwort!");
    }

    function show(id, btn) {
        const views = document.getElementsByClassName('view');
        for (let i = 0; i < views.length; i++) {
            views[i].classList.remove('active-view');
        }
        document.getElementById(id).classList.add('active-view');
        
        const btns = document.getElementsByClassName('nav-btn');
        for (let i = 0; i < btns.length; i++) {
            btns[i].classList.remove('active');
        }
        btn.classList.add('active');
    }

    function save() { db.notes = document.getElementById('notes').value; localStorage.setItem('tp_v48_ironclad', JSON.stringify(db)); }
    function saveP() { for(let i=1;i<=8;i++){for(let j=1;j<=5;j++){db.schedule[i+'-'+j]=document.getElementById('p-'+i+'-'+j).value;}} save(); }
    function addCls() { const n=prompt("Name der Klasse:"); if(n){db.classes.push(n);save();renderC();}}
    function renderC() { const l=document.getElementById('cls-list'); l.innerHTML=db.classes.length?'':'<p>Keine Klassen.</p>'; db.classes.forEach(c=>l.innerHTML+=`<div class="card" style="margin-bottom:10px; padding:15px;"><b>Klasse ${c}</b></div>`); }
    
    let timerInt;
    function startT() { 
        clearInterval(timerInt);
        let s=1500; 
        timerInt = setInterval(()=>{
            s--; 
            let min = Math.floor(s/60);
            let sec = s%60;
            document.getElementById('tdisp').innerText=min+":"+(sec<10?'0':'')+sec;
            if(s<=0) { clearInterval(timerInt); alert("Zeit um!"); }
        },1000); 
    }
</script>
</body>
</html>
